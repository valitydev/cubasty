[
    {kernel, [
        {log_level, info},
        {logger, [
            {handler, default, logger_std_h, #{
                level =>
                    debug,
                config => #{
                    type =>
                        {file, "/var/log/cs/console.json"},
                    sync_mode_qlen =>
                        20
                },
                formatter =>
                    {logger_logstash_formatter, #{}}
            }}
        ]}
    ]},

    {cs, [
        {ip, "::"},
        {port, 8023},
        {default_woody_handling_timeout, 30000},
        {epg_db_name, cs},
        {health_check, #{
            disk => {erl_health, disk, ["/", 99]},
            memory => {erl_health, cg_memory, [99]},
            service => {erl_health, service, [<<"customer-storage">>]}
        }},
        {services, #{
            customer_management => #{
                url => <<"http://cs.default:8023/v1/customer/management">>
            },
            bank_card_storage => #{
                url => <<"http://cs.default:8023/v1/customer/bank_card">>
            }
        }}
    ]},

    {woody, [
        {acceptors_pool_size, 4}
    ]},

    {epg_connector, [
        {databases, #{
            cs => #{
                host => "cs_db",
                port => 5432,
                username => "postgres",
                password => "postgres",
                database => "customer_storage"
            }
        }},
        {pools, #{
            default_pool => #{
                database => cs,
                size => 10
            }
        }}
    ]},

    {scoper, [
        {storage, scoper_storage_logger}
    ]},

    {prometheus, [
        {collectors, [
            default
        ]}
    ]}
].
